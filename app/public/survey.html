<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>FriendFinder</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Libre+Baskerville" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	</head>
	<body>
		<div class="container">
			<div>
				<h2>Survey Questions</h2>
				<hr>
				<h3><strong>About You</strong></h3>
				<h4>Name (Required)</h4>
				<input type="text" name id="name" class="form-control" required>
				<h4>Link to Photo Image (Required)</h4>
				<input type="text" name id="photo" class="form-control" required>
				<hr>
				<h3><strong>Question 1</strong></h3>
				<h4>You always want to be the best at what you do.</h4>
				<select class="option-selected" id="q1">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 2</strong></h3>
				<h4>You never overreact to a bad situation.</h4>
				<select class="option-selected" id="q2">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 3</strong></h3>
				<h4>You see problems as an opportunity to shine.</h4>
				<select class="option-selected" id="q3">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 4</strong></h3>
				<h4>You are always looking for new things to learn.</h4>
				<select class="option-selected" id="q4">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 5</strong></h3>
				<h4>You always keep your emotions in check.</h4>
				<select class="option-selected" id="q5">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 6</strong></h3>
				<h4>You have no problem seeing things from another's point of view.</h4>
				<select class="option-selected" id="q6">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 7</strong></h3>
				<h4>You must always be in control of the situation.</h4>
				<select class="option-selected" id="q7">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 8</strong></h3>
				<h4>You try to get out of your comfort zone whenever possible.</h4>
				<select class="option-selected" id="q8">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 9</strong></h3>
				<h4>You have a high tolerance of other people's intolerance.</h4>
				<select class="option-selected" id="q9">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<h3><strong>Question 10</strong></h3>
				<h4>You listen to other people's arguments even if you do not agree with them.</h4>
				<select class="option-selected" id="q10">
					<option default>Select an Option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<br>
			<br>
			<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
			<hr>
			
		  	<div class="container">
		  		<footer>
		  			<a href="/api/friends">API Friends List</a>
		  			<a href="https://github.com/AgesilausDrako/FriendFinder" target="_blank">GitHub Repo</a>
		  		</footer>
		  	</div><!-- footer -->
		</div><!-- container -->
		<!-- Modal -->
		<div id="myModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">
		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">x</button>
		        <h4 class="modal-title">Best Match</h4>
		      </div>
		      <div class="modal-body">
		        <h2 id="matchName">Match Name</h2>
		        <img id="matchImage" src="">
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div><!-- Modal -->
		<script type="text/javascript">
			$("#submit").on("click", function(){
				event.preventDefault();
				function validateInput() {
					var isValid = true;
					$(".form-control").each(function() {
						if ($(this).val() === "")
							isValid = false;
					});

					$(".option-selected").each(function() {
						if ($(this).val() === "")
							isValid = false;
					});
					return isValid;
				}

				if (validateInput() === true) {
					var userData = {
						name: $("#name").val(),
						photo: $("#photo").val(),
						scores: [$("#q1").val(), $("#q2").val(), $("#q2").val(), $("#q3").val(),
						$("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(),
						$("#q9").val(), $("#q10").val(),
						]
					}
					console.log(userData);
				
					var currentURL = window.location.origin;

					$.post(currentURL + "/api/friends", userData, function(data) {
						
						$("#matchName").text(data.name);
						$("#matchImg").attr("src", data.photo);

						$("#myModal").modal("toggle");
					});
				} else {
					alert("Not all fields are completed!");
				}
				return false;
			});
		</script>
	</body>
</html>